<template>
  <v-dialog v-model="show"  persistent max-width="500px">
    <v-card v-if="item">
      <!-- v-if="item != {}" -->
      <!--  :img="item.imageUrl" contain -->
      <v-card-actions style="float: left;">
        
        <v-btn text icon color="red" @click.stop="show = false"
          ><v-icon>mdi-close-circle</v-icon></v-btn
        >
      </v-card-actions>
      <h2>{{ item.name }}</h2>

      <h4 class="item-title">סמכות:</h4>
      {{ item.authority }}
      <br />
      <h4 class="item-title">שם בפת״ר:</h4>
      <p class="pre-formatted">{{ patarName }}</p>

      <h4 class="item-title">שם בסאפ:</h4>
      <p class="pre-formatted">{{ sapName }}</p>
      <h4 class="item-title">התוויות נגד:</h4>
      {{ item.neged }} <br />

      <h4 class="item-title">מק״ט:</h4>
      {{ item.serial }}

      <v-card-actions style="float: left;">
          <v-btn color="red" @click.stop=""
          >delete</v-btn
        >
         <v-btn v-if="$store.state.user && $store.state.user.role == 'admin'" color="green" @click.stop="editDoc(item)"
          >save</v-btn
        >
      </v-card-actions>
    </v-card>
  </v-dialog>
</template>
<script>
export default {
  props: {
    value: Boolean,
    item: {
      type: Object,
      default: () => {
        return {};
      }
    }
  },
  computed: {
    show: {
      get() {
        return this.value;
      },
      set(value) {
        this.$emit("input", value);
      }
    },
    sapName() {
      return this.item ? this.formatMinus(this.item.sapName) : "";
    },
    patarName() {
      return this.item ? this.formatMinus(this.item.patarName) : "";
    }
  },
  data() {
    return {};
  },
  methods: {
    formatMinus(name) {
      if (!name) return "";
      return name.replace(
        new RegExp("\-\-", "g"),
        `
`
      );
    },
    editDoc(item){
      console.log('item :', item);
    }
  }
};
</script>

<style scoped>
.item-title {
  display: inline;
}
.pre-formatted {
  white-space: pre-wrap; /* 👈 this is the important part */
  margin: 0;
}
</style>
